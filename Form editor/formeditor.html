<!DOCTYPE html>
<html>
	<head>
		<title>Editor</title>
		<script src="shjquery.js"></script>

	</head>
	<body>
		<p id="original" hidden>lol|#|test|#|</p>
		<div>
			<textarea id="new"></textarea>
			<button onclick="addNew();">Add</button>
		</div>
		<div>
			<ol id="cells">
			</ol>
		</div>
		<div>
			<button onclick="submitf();">submit</button>
		</div>
		<script type="text/javascript">
			var lines = "";
			var count = 0;

			function recordAll() {
				lines = "";
				$('#cells').children().each(function(){lines = $(this).find('span').text()+"|#|"+lines;});
			}

			function submitf() {
				recordAll();
				// var request = new XMLHttpRequest()
				alert(lines.toString());
			}

			function addNew() {
				if ($('#new').val()) {
					$('#cells').append('<li id="q'+count+'"><button onclick="deletethis(q'+count+');"> x</button><span>'+$('#new').val()+'</span></li>');
					$('#new').val("");
					count++;
				}
			}

			function deletethis(x) {
				$(x).remove();
			}

			function init() {
				$('cells').empty();
				var original = $('#original').text().split('|#|');
				original.pop();
				while(original.length>0){
					$('#cells').append('<li id="q'+count+'"><button onclick="deletethis(q'+count+');"> x</button><span>'+original.pop()+'</span></li>');
					count++;
				}
			}
		</script>
		<script type="text/javascript" defer>init();</script>
	</body>
</html>
